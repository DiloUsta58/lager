<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">

<title>Lagerverwaltung</title>

   <link rel="stylesheet" href="css/style.css">


  
<!-- =========================
     ICONS
========================= -->

<link rel="icon" href="icons/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">

<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon-180x180.png">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1f4fd8">


</head>
<body>
<div id="print-header">
  <div class="print-title">Lagerbestand</div>
  <div class="print-date" id="print-date"></div>
</div>

<!-- =========================
     LOGIN-BEREICH
========================= -->
<form id="loginForm" onsubmit="login(event)">
    <div id="loginBox">
      <h3>üîí Anmeldung erforderlich</h3>
      <input id="userInput" placeholder="Benutzer">
      <input id="passInput" type="password" placeholder="Passwort">
      <button type="submit">Anmelden</button>
    </div>
</form>


<!-- =========================
     GESCH√úTZTE APP
========================= -->
<div id="app" style="display:none">
  <h2>Lagerverwaltung v1.0</h2>
        <button  id="resetMaterialDataBtn"  class="admin-btn danger"  onclick="resetMaterialData()" style="display:none">  Initialdaten neu laden</button>
        <!-- Logout sperrt die komplette Liste wieder -->
        <button class="btn" onclick="logout()">üîíLogout</button>
        <button class="btnExport" onclick="exportAllData()">EXPORT DATEN</button>
        
        <input
          type="file"
          id="importFile"
          accept="application/json"
          hidden
          onchange="importAllData()"
        >
        <button class="btnImport" onclick="document.getElementById('importFile').click()">
          IMPORT DATEN!
        </button>
        
        <!-- Key-Freischaltung 
        <input class="inputs" id="keyInput" type="password" placeholder="Key eingeben">
        <button id="editToggleBtn" class="btn" onclick="toggleEditing()">üîì Freischalten</button>-->
        <button id="themeToggleBtn" class="btn-primary" onclick="toggleTheme()">üåô Dark Mode</button>


        <hr>

        <div class="tab-bar">
          <button class="tab-btn" data-tab="ke" data-label="Rohstoff Liste">Rohstoff Liste</button>
          <button class="tab-btn" data-tab="fs" data-label="FS-Tiegel Liste">FS-Tiegel Liste</button>
          <button class="tab-btn" data-tab="fm" data-label="FM-Schleifb√§nder">FM-Schleifb√§nder</button>
          <button class="tab-btn" data-tab="inv" data-label="Inventur Liste">Inventur Liste</button>
          <button class="tab-btn" data-tab="historySectionIExport" data-label="Historie">Historie</button>
          <button class="no-print" onclick="printTable()">Drucken</button>
        </div>

        <hr>
        
            <!-- =========================
                SEARCH WRAPPER
            ========================== -->
            <div class="search-wrapper">

              <!-- Suchfeld -->
              <input
                class="sSearch"
                id="search"
                type="text"
                placeholder="Suche (Material, E-Nummer, Regal)"
                autocomplete="off"
              />

              <!-- ‚ùå Clear-Button -->
              <span id="searchClear" class="search-clear">‚ùå</span>

              <!-- ‚Üë ‚Üì Treffer-Navigation -->
              <div id="searchNav" class="search-nav">
                <button id="searchPrev" type="button" title="Vorheriger Treffer">‚Üë</button>
                <button id="searchNext" type="button" title="N√§chster Treffer">‚Üì</button>
              </div>

            </div>

    <div class="content">
            <!-- =========================
                KE SECTION
            ========================= -->

            <div id="keSection" class="tab-section active">
              <div class="ke-column-controls">
                <label class="locked"><input type="checkbox" data-col="Material" checked disabled>Material</label>
                <label><input type="checkbox" data-col="e" checked>E-Nummer</label>
                <label><input type="checkbox" data-col="charge" checked>Charge-Nr.</label>
                <label><input type="checkbox" data-col="palette" checked>Paletten-Nr.</label>
                <label><input type="checkbox" data-col="regal" checked>Regal</label>
                <label><input type="checkbox" data-col="bestand" checked>Bestand</label>
                <label><input type="checkbox" data-col="bemerkung" checked>Bemerkung / Status</label>

                  <div style="display: flex; justify-content: flex-end;">
                      <button id="ResetKEToggleBtn" class="ResetKEBtn" onclick="resetKE()">Tabelle zur√ºcksetzen</button>
                  </div>

              </div>
        <center>
          <!-- Such- & Steuerleiste -->
            <div id="keToolbar">
              <select id="categoryFilter" class="filter">
                <option value="">Alle Kategorien</option>
              </select>
            </div>
        </center>
              <div class="table-fullwidth">
                <div class="table-scroll">
                  <table class="lager-table KE-table">
                    <thead>
                      <tr>
                        <th></th>
                        <th>Material</th>
                        <th>E-Nummer</th>
                        <th>Charge-Nr.</th>
                        <th>Paletten-Nr.</th>
                        <th>Regal</th>
                        <th>Bestand</th>
                        <th>Bemerkung</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                  </table>
                </div>
              </div>
              <!-- =========================
                  HISTORY SECTION KE
              ========================= -->
              <div id="historySection" class="tab-section" style="display:none; margin-top:10px;">
                <h3 class="section-title">√Ñnderungshistorie</h3>
                <div class="history-controls">
                  <button onclick="toggleHistory()">Historie anzeigen / ausblenden</button>
                  <button onclick="clearHistory()">Historie l√∂schen</button>
                </div>

                <table id="historyTable" class="lager-table history-table" style=margin-top:10px;">
                  <thead>
                    <tr>
                      <th>Zeit</th>
                      <th>Feld</th>
                      <th>Alt</th>
                      <th>Neu</th>
                    </tr>
                  </thead>
                  <tbody id="historyBody"></tbody>
                </table>
              </div>              
            </div>

            <!-- =========================
                FS SECTION
            ========================= -->
            <div id="fsSection" class="tab-section">
              <div class="fs-column-controls">
                <label><input type="checkbox" data-col="kurz" checked>Kurz</label>
                <label class="locked"><input type="checkbox" checked disabled>Bezeichnung</label>
                <label><input type="checkbox" data-col="material">Material</label>
                <label><input type="checkbox" data-col="stueck" checked>St√ºckzahl</label>
                <label><input type="checkbox" data-col="e" checked>E-Nummer</label>
                <label><input type="checkbox" data-col="kuerzel" checked>K√ºrzel</label>
                <label><input type="checkbox" data-col="bestand" checked>Bestand K.</label>
                <label><input type="checkbox" data-col="dpc" checked>Bestand D</label>
                  <div style="display: flex; justify-content: flex-end;">
                      <button id="ResetFSToggleBtn" class="ResetFSBtn" onclick="resetFS()">Tabelle zur√ºcksetzen</button>
                  </div>                
              </div>

              <div class="table-fullwidth">
                <div class="table-scroll">
                  <table class="lager-table fs-table KE-table">
                    <thead>
                      <tr>
                        <th>Kurz</th>
                        <th>Bezeichnung</th>
                        <th>Material</th>
                        <th>St√ºckzahl</th>
                        <th>E-Nummer</th>
                        <th>K√ºrzel</th>
                        <th>Bestand K.</th>
                        <th>Bestand D</th>
                      </tr>
                    </thead>
                    <tbody id="fsTableBody"></tbody>
                  </table>
                </div>
              </div>
            </div> <!-- table-scroll -->
          </div> <!-- table-fullwidth -->
        </div> <!-- ‚úÖ fsSection ENDE -->

            <!-- =========================
                FM SECTION
            ========================= -->
              <section id="fmSection" class="tab-section" style="display:none;">
                                              
              <!-- Spaltenauswahl -->
              <div class="fm-column-toggle">
                <label><label class="locked"><input type="checkbox" checked disabled> Abmessung</label>
                <label><input type="checkbox" data-col="pos1" checked>Pos. Nr.</label>
                <label><input type="checkbox" data-col="artikel1" checked>Artikel-Nr. #1</label>
                <label><input type="checkbox" data-col="artikel2" checked>Artikel-Nr. #2</label>
                <label><input type="checkbox" data-col="artikel" checked>Artikel</label>
                <label><input type="checkbox" data-col="koernung" checked>K√∂rnung</label>
                <label><input type="checkbox" data-col="verpackung" checked>Verpackung</label>
                <label><input type="checkbox" data-col="pos_Nr" checked>Pos.Nr.</label>
                <label><input type="checkbox" data-col="bestand" checked> Bestand</label>
                <label><input type="checkbox" data-col="bemerkung" checked> Bemerkung</label>
                  <div style="display: flex; justify-content: flex-end;">
                      <button id="ResetFMToggleBtn" class="ResetFMBtn" onclick="resetFM()">Tabelle zur√ºcksetzen</button>
                  </div>
              </div>


              <!-- Tabelle -->
              <div class="table-fullwidth">
                <div class="table-scroll">
                  <table class="lager-table fmTable">
                    <thead>
                      <tr>
                        <th data-col="pos1">Pos. #1</th>
                        <th data-col="artikel1">Artikel-Nr. #1</th>
                        <th data-col="artikel2">Artikel-Nr. #2</th>
                        <th data-col="artikel">Artikel</th>
                        <th data-col="koernung">K√∂rnung</th>
                        <th data-col="abmessung">Abmessung</th>
                        <th data-col="verpackung">Verpackung</th>
                        <th data-col="pos_Nr">Pos.Nr.</th>
                        <th data-col="bestand">Bestand</th>
                         <th data-col="bemerkung">Bemerkung</th>
                      </tr>
                    </thead>
                    <tbody id="fmTableBody"></tbody>
                  </table>
                </div>
              </div>
            </section>
            <!-- =========================
                INVENTUR SECTION
            ========================= -->
            <div id="inventarSection" class="tab-section">
              <h3>Inventur ‚Äì Gesamt√ºbersicht</h3>

              <div class="inventur-header">
                <label>Inventur-Stichtag:<input type="date" id="inventurDate"></label>
                <button class="invDate" onclick="saveInventurDate()">Datum Fixieren!</button>
              </div>

              <div class="table-fullwidth">
                <div class="table-scroll">
                  <table class="lager-table inv-table">
                    <thead>
                      <tr>
                        <th>Quelle</th>
                        <th>Beschreibung / Material</th>
                        <th>E-Nummer</th>
                        <th>Charge-Nr.</th>
                        <th>Paletten-Nr.</th>
                        <th>Bestand</th>
                        <th>Gesamt</th>
                      </tr>
                    </thead>
                    <tbody id="invTableBody"></tbody>
                  </table>
                </div>
              </div>
            </div>
          <!-- =========================
              HISTORY SECTION TAB
          ========================= -->
          <section id="historySectionIExport" class="tab-section">
            <div class="table-scroll">
              <table>
                <thead>
                  <tr>
                    <th>Zeitpunkt</th>
                  </tr>
                </thead>
                <tbody id="historyBodyIExport"></tbody>
              </table>
            </div>
          </section>
</div>

<hr>
     <footer>
        <div id="kimlik">¬© Dilaver B√∂l√ºkba≈üƒ±</div>
        <div id="lastUpdate" style="display:none;"></div>
    </footer>

<script src="js/auth_config.js"></script>
<script src="js/auth.js"></script>
<script src="js/daten_fm.js"></script>
<script src="js/data_ke.js"></script>
<script src="js/daten_fs.js"></script>
<script src="js/daten.js"></script>
<script src="js/search.js"></script>

</body>
</html>
